{% extends "dashboard_base.html" %}
{% load static %}

{% block title %}Settings{% endblock %}

{% block content %}
<div class="container py-4">

  <!-- Header -->
  <div class="mb-4">
    <h3 class="fw-bold">Settings</h3>
    <p class="text-muted">Manage your account settings, preferences, and privacy options</p>
  </div>

  <!-- Tabs -->
  <div class="d-flex justify-content-start mb-4">
    <button id="profileBtn" class="btn btn-sm px-4 btn-success rounded-pill tab-active">Profile</button>
  </div>

<!-- Profile Section -->
<div id="profileSection">
  <div class="card shadow-sm border-0">
    <div class="card-body">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <div class="d-flex align-items-center gap-3">
          <!-- Avatar -->
          <div class="rounded-circle bg-success text-white fw-bold d-flex justify-content-center align-items-center"
               style="width: 60px; height: 60px; font-size: 22px;">
            {{ request.user.first_name|default:request.user.username|slice:":1"|upper }}
          </div>
          <div>
            <h5 class="fw-bold mb-0">Profile Information</h5>
            <small class="text-muted">Update your personal information</small>
          </div>
        </div>
        <a href="#" class="btn btn-outline-secondary btn-sm"
          data-bs-toggle="modal" data-bs-target="#editProfileModal">
          <i class="bi bi-pencil-square"></i> Edit
        </a>

      </div>

   
      <div class="row g-3">
        <div class="col-md-6">
          <label class="form-label small text-muted">Full Name</label>
          <input type="text" class="form-control"
                 value="{{ request.user.get_full_name|default:request.user.username }}" disabled>
        </div>
        <div class="col-md-6">
          <label class="form-label small text-muted">Email Address</label>
          <input type="email" class="form-control"
                 value="{{ request.user.email }}" disabled>
        </div>
        <div class="col-md-6">
          <label class="form-label small text-muted">Phone Number</label>
          <input type="text" class="form-control"
                 value="{{ request.user.parent_profile.phone|default:'-' }}" disabled>
        </div>
        <div class="col-md-6">
          <label class="form-label small text-muted">Location</label>
          <input type="text" class="form-control"
                 value="{{ request.user.parent_profile.location|default:'-' }}" disabled>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Edit Profile Modal -->
<div class="modal fade" id="editProfileModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content border-0 shadow">
      <form method="post" action="{% url 'parents:edit_profile' %}">
        {% csrf_token %}
        <div class="modal-header bg-success text-white">
          <h5 class="modal-title fw-bold">Edit Profile</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label class="form-label">First Name</label>
            <input type="text" class="form-control" name="first_name" value="{{ request.user.first_name }}">
          </div>
          <div class="mb-3">
            <label class="form-label">Last Name</label>
            <input type="text" class="form-control" name="last_name" value="{{ request.user.last_name }}">
          </div>
          <div class="mb-3">
            <label class="form-label">Email</label>
            <input type="email" class="form-control" name="email" value="{{ request.user.email }}">
          </div>
          <div class="mb-3">
            <label class="form-label">Phone</label>
            <input type="text" class="form-control" name="phone" value="{{ request.user.parent_profile.phone }}">
          </div>
          <div class="mb-3">
            <label class="form-label">Location</label>
            <input type="text" class="form-control" name="location" value="{{ request.user.parent_profile.location }}">
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-success">Save Changes</button>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>










</div>
{% endblock %}

<style>
.view-toggle {
  border: 1px solid #e0e0e0;
}
.view-toggle .btn {
  font-weight: 500;
  border: none !important;
  box-shadow: none !important;
}
.view-toggle .btn.tab-active {
  background-color: #198754 !important;
  color: #fff !important;
}
.view-toggle .btn:not(.tab-active) {
  background: transparent;
  color: #198754;
}
.view-toggle .btn:hover:not(.tab-active) {
  background: #e6f4ec;
}
#notificationsSection .form-check-input {
  width: 2.5em;
  height: 1.3em;
  cursor: pointer;
}
#notificationsSection p {
  font-size: 0.95rem;
}
#notificationsSection small {
  font-size: 0.8rem;
}

</style>

{% block extra_js %}

{% endblock %}
